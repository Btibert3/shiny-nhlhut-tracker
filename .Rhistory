i  =5700
## some constants
# URL = "https://hutdb.net/ajax/stats.php?year=18&page=%s&selected=OVR&sort=DESC"
URL = "https://hutdb.net/ajax/stats.php?year=19&page=%s&selected=OVR&sort=DESC"
## loop to get the data -- ONLYL SKATERS
hutdb = data.frame()
URL2 = sprintf(URL, i)
URL2
hutdb = data.frame()
## check the sequence number of N = 5800 below, NEW CARDS ADDED
for (i in seq(0, 5800, 100)) {
URL2 = sprintf(URL, i)
results = fromJSON(URL2)
players = results %>% filter(!is.na(Player)) %>% select(-results)
colnames(players) = tolower(colnames(players))
players = players %>% mutate_at(vars(year, wgt:salary, age:jersey), funs(as.numeric))
hutdb = bind_rows(hutdb, players)
#players_list = toJSON(players)
#players_list = rjson::fromJSON(players_list)
cat("finished ", i, "\n")
rm(URL2, results, players)
}
options(stringsAsFactors = FALSE)
## load the libraries
library(jsonlite)
library(dplyr)
library(tidyr)
library(stringr)
for (i in seq(0, 5800, 100)) {
URL2 = sprintf(URL, i)
results = fromJSON(URL2)
players = results %>% filter(!is.na(Player)) %>% select(-results)
colnames(players) = tolower(colnames(players))
players = players %>% mutate_at(vars(year, wgt:salary, age:jersey), funs(as.numeric))
hutdb = bind_rows(hutdb, players)
#players_list = toJSON(players)
#players_list = rjson::fromJSON(players_list)
cat("finished ", i, "\n")
rm(URL2, results, players)
}
glimpse(hutdb)
library(neo4r)
## save the object as an RDS file to be read in by the server
saveRDS(hutdb, "data/hut.rds")
shiny::runApp('hut-price-tracker')
## load the data every time the UI loads
readRDS("data/hut.rds")
## load the data every time the UI loads
hutdb = readRDS("data/hut.rds")
glimpse(hutdb)
## create a search term to help with overall and type
hutdb = hutdb %>% transform(search_name = paste0(ovr, "-", card, "-", player))
glimpse(hutdb)
library(shiny)
state.name
runApp('hut-price-tracker')
runApp('hut-price-tracker')
runApp('hut-price-tracker')
runApp('hut-price-tracker')
runApp('hut-price-tracker')
runApp('hut-price-tracker')
runApp('hut-price-tracker')
runApp('hut-price-tracker')
runApp('hut-price-tracker')
runApp('hut-price-tracker')
runApp('hut-price-tracker')
runApp('hut-price-tracker')
